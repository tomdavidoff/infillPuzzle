
R version 4.4.0 (2024-04-24) -- "Puppy Cup"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> # vancouverProfit.R
> # estimate profitability of redevelopment choices in Vancouver
> # Tom Davidoff 
> # 01/31/26
> 
> library(data.table)
Warning message:
package ‘data.table’ was built under R version 4.4.1 
> library(ggplot2)
> 
> # grab and save folio geometries for Vancouver if not yet saved
> fGeo <- "tables/bca26FolioGeometryVancouver.rds"
> if (!file.exists(fGeo)) {
+   library(sf)
+   dfG <- st_read(
+   "/Volumes/T7Office/bigFiles/bca_folios_spatial_file_20251103/bca_folios.gpkg.gpkg",
+   query = "SELECT ROLL_NUMBER, ACTUAL_USE_DESCRIPTION, NEIGHBOURHOOD, 
+            SHAPE_AREA, SHAPE_LEN, geom, JURISDICTION
+            FROM WHSE_HUMAN_CULTURAL_ECONOMIC_BCA_FOLIO_DESCRIPTIONS_SV 
+            WHERE JURISDICTION = 'City of Vancouver'"
+ )
+   print(head(dfG))
+   print(table(dfG$JURISDICTION))
+   saveRDS(dfG,fGeo)
+ }
Linking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE
Reading query `SELECT ROLL_NUMBER, ACTUAL_USE_DESCRIPTION, NEIGHBOURHOOD, 
           SHAPE_AREA, SHAPE_LEN, geom, JURISDICTION
           FROM WHSE_HUMAN_CULTURAL_ECONOMIC_BCA_FOLIO_DESCRIPTIONS_SV 
           WHERE JURISDICTION = 'City of Vancouver''
from data source `/Volumes/T7Office/bigFiles/bca_folios_spatial_file_20251103/bca_folios.gpkg.gpkg' 
  using driver `GPKG'
Simple feature collection with 223292 features and 6 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 1200245 ymin: 464882.7 xmax: 1239015 ymax: 482237.9
Projected CRS: NAD83 / BC Albers
Simple feature collection with 6 features and 6 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 1203305 ymin: 476538.7 xmax: 1203367 ymax: 476658.2
Projected CRS: NAD83 / BC Albers
      ROLL_NUMBER          ACTUAL_USE_DESCRIPTION NEIGHBOURHOOD SHAPE_AREA
1 001025638140000          Single Family Dwelling    Point Grey         NA
2 001025638280000          Single Family Dwelling    Point Grey         NA
3 001025638480000          Single Family Dwelling    Point Grey         NA
4 001025638660000          Single Family Dwelling    Point Grey         NA
5 001025638920000          Single Family Dwelling    Point Grey         NA
6 001025638950000 Residential Dwelling with Suite    Point Grey         NA
  SHAPE_LEN      JURISDICTION                           geom
1        NA City of Vancouver POLYGON ((1203335 476626.4,...
2        NA City of Vancouver POLYGON ((1203341 476620.3,...
3        NA City of Vancouver POLYGON ((1203340 476613.8,...
4        NA City of Vancouver POLYGON ((1203339 476585.5,...
5        NA City of Vancouver POLYGON ((1203336 476564.2,...
6        NA City of Vancouver POLYGON ((1203325 476572, 1...

City of Vancouver 
           223292 
> 
> dfdfdf
Error: object 'dfdfdf' not found
Execution halted
